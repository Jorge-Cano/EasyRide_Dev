<!-- index.html code for the Rating & Tip pop up -->
<!-- Needs to be connected after the map portion or some other ride page -->

  <script src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/2.0.6/glide.min.js"></script>

  <title>Easy Ride</title>
  <link rel="stylesheet" href="styles/style.css">
  <link rel="stylesheet" href="styles/glide.core.min.css">
  <link rel="stylesheet" href="styles/glide.theme.min.css">


<div class="pen-description">
  <div class="summary">Survey</div>
  <div class="note">Giving feedback while paying</div>
</div>
<div class="container">
  <div id="glide" class="glide glide--carousel glide--horizontal">
    <div class="glide__arrows">
      <button data-glide-dir="&lt;" class="glide__arrow prev">prev</button>
      <button data-glide-dir="&gt;" class="glide__arrow next">next</button>
    </div>
    <div class="glide__wrapper">
      <ul class="glide__track">
        <li data-slide-number="1" class="glide__slide">
          <div class="card no-flip">
            <h1 class="question">Your Ride Has Successfully ended. How was your trip with us?</h1><span class="star-rating">
              <input type="radio" name="rating" value="1"/><i></i>
              <input type="radio" name="rating" value="2"/><i></i>
              <input type="radio" name="rating" value="3"/><i></i>
              <input type="radio" name="rating" value="4"/><i></i>
              <input type="radio" name="rating" value="5"/><i></i></span>
            <div class="card-footer">
              <div class="choice-wrapper"><img src="https://cdn.drawception.com/images/panels/2014/3-19/4CFS9eeaEF-2.png" class="avatar"/>
                <div class="choice left"></div>
              </div>
            </div>
          </div>
        </li>
        <li data-slide-number="2" class="glide__slide">
          <div class="card bill">
            <figure class="front"><span class="content">
                <div class="disclaimer">Prices include tax.</div>
                <ul class="receipt clearfix">
                  <li class="item">Local Ride Round Trip</li>
                  <li class="cost">$22.00</li>
                  <li class="detail">+ Wheel Chair Service</li>
                  <li class="add">$2.00</li>
                </ul>
                <ul class="receipt clearfix">
                  <li class="item">Bags Carry</li>
                  <li class="cost">$0.00</li>
                </ul>
                <div class="option"><a href="#" class="tip">Add tip</a><span class="tip-wrapper">
                    <input type="text" size="5" placeholder="0.00" value="" onkeypress="return event.charCode &gt;= 46 &amp;&amp; event.charCode &lt;= 57" class="tip-amt"/></span></div>
                <input type="button" value="" autofocus="autofocus" class="btn"/></span></figure>
            <figure class="back">
              <div class="content">
                <div class="message">Thanks for using Easy Ride</div>
                <div class="restaurant">We hope to see you soon</div>
              </div>
            </figure>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>
<div class="confirm-wrapper">
  <div class="confirm-modal">
    <div class="question">Are you sure you don't want to leave a tip?</div>
    <button class="yes">Yes</button><a class="cancel">No, leave a tip.</a>
  </div><a href="#" class="reset">Reset</a>
</div>

<script src="main.js"></script>


<!-- CSS Code for Ratings & Tip Pop Up -->
@import url(https://fonts.googleapis.com/css?family=Lato:400,300,700);
body {
  -webkit-text-size-adjust: 100%;
  font-family: 'Lato', sans-serif;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}

input {
  -webkit-appearance: none;
}

*, *:after, *:before {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

a {
  text-decoration: none;
}

.pen-description {
  margin: 60px 0;
  text-align: center;
}
.pen-description .summary {
  margin-bottom: 10px;
}
.pen-description .note {
  color: #555;
  font-size: .85rem;
}

html, body {
  min-height: 100%;
}

html {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}

body {
  background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuMCIgeTE9IjEuMCIgeDI9IjEuMCIgeTI9IjAuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzVlNzA5NiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2JjZDZkYiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');
  background-size: 100%;
  background-image: -webkit-gradient(linear, 0% 100%, 100% 0%, color-stop(0%, #5e7096), color-stop(100%, #bcd6db));
  background-image: -webkit-linear-gradient(left bottom, #ffffff 0%, #ffffff 100%);
  background-image: linear-gradient(to right top, #ffffff 0%, #bcd6db 100%);
  margin: auto;
}

li {
  list-style: none;
}

textarea, input {
  font-family: 'Lato';
}

.pen-description {
  min-width: 800px;
  display: none;
}

.container {
  margin: 0 auto;
  min-width: 800px;
  max-width: 960px;
  -webkit-perspective: 9000px;
          perspective: 9000px;
  overflow: hidden;
}

.glide {
  height: auto;
  margin: 30px auto;
  width: 50%;
}

.glide__bullets {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: justify;
      -ms-flex-pack: justify;
          justify-content: space-between;
  left: 0;
  margin: 0 auto;
  right: 0;
  top: -60px;
  width: 300px !important;
}
.glide__bullets button {
  position: relative;
}
.glide__bullets button:before {
  color: #5C557A;
  position: absolute;
  left: 50%;
  margin-left: -50px;
  padding: 15px 0;
  width: 100px;
  overflow: auto;
}
.glide__bullets button.active:before {
  color: #fff;
  font-family: 'Lato';
}
.glide__bullets button:nth-child(1):before {
  content: "test 1";
}
.glide__bullets button:nth-child(2):before {
  content: "test 2";
}
.glide__bullets button:nth-child(3):before {
  content: "test 3";
}
.glide__bullets button:nth-child(4):before {
  content: "test 4";
}
.glide__bullets button:nth-child(5):before {
  content: "test 5";
}
.glide__bullets:after {
  content: "";
  width: 278px;
  height: 1px;
  background-color: rgba(92, 85, 122, 0.2);
  margin: 0 auto;
  margin-top: 4px;
  position: absolute;
  left: 0;
  right: 0;
}
.glide__bullets > * {
  height: 10px;
  width: 10px;
  z-index: 5;
}

.glide__bullets > *:focus {
  background-color: #fff !important;
}

.glide__slide {
  padding: 20px 0;
}
.glide__slide .card {
  border: #ddd;
  border-radius: 5px;
  box-shadow: 0 0 10px transparent;
  min-height: 400px;
  margin: 5px 10px;
  opacity: .4;
  padding: 50px;
  position: relative;
  -webkit-transition: -webkit-transform 1s;
  transition: -webkit-transform 1s;
  transition: transform 1s;
  transition: transform 1s, -webkit-transform 1s;
}
.glide__slide .card.no-flip {
  background: #fff;
}
.glide__slide .card.bill {
  height: 445px;
}
.glide__slide.active .card {
  box-shadow: 0 5px 15px rgba(50, 50, 50, 0.2);
  opacity: 1;
}

h1 {
  font-weight: normal;
  text-align: center;
  font-size: 1.3rem;
  margin: 40px 0;
}

.answer {
  border: 1px solid #ccc;
  border-radius: 3px;
  resize: none;
  padding: 10px;
  width: 100%;
}

.star-rating {
  font-size: 0;
  white-space: nowrap;
  display: table;
  margin: 0 auto;
  width: 175px;
  height: 35px;
  overflow: hidden;
  position: relative;
  background: url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cG9seWdvbiBmaWxsPSIjREREREREIiBwb2ludHM9IjEwLDAgMTMuMDksNi41ODMgMjAsNy42MzkgMTUsMTIuNzY0IDE2LjE4LDIwIDEwLDE2LjU4MyAzLjgyLDIwIDUsMTIuNzY0IDAsNy42MzkgNi45MSw2LjU4MyAiLz48L3N2Zz4=");
  background-size: contain;
}
.star-rating i {
  opacity: 0;
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 20%;
  z-index: 1;
  background: url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cG9seWdvbiBmaWxsPSIjRkZERjg4IiBwb2ludHM9IjEwLDAgMTMuMDksNi41ODMgMjAsNy42MzkgMTUsMTIuNzY0IDE2LjE4LDIwIDEwLDE2LjU4MyAzLjgyLDIwIDUsMTIuNzY0IDAsNy42MzkgNi45MSw2LjU4MyAiLz48L3N2Zz4=");
  background-size: contain;
}
.star-rating input {
  -moz-appearance: none;
  -webkit-appearance: none;
  cursor: pointer;
  opacity: 0;
  display: inline-block;
  width: 20%;
  height: 100%;
  margin: 0;
  padding: 0;
  z-index: 2;
  position: relative;
}
.star-rating input:hover + i, .star-rating input:checked + i {
  opacity: 1;
}
.star-rating i ~ i {
  width: 40%;
}
.star-rating i ~ i ~ i {
  width: 60%;
}
.star-rating i ~ i ~ i ~ i {
  width: 80%;
}
.star-rating i ~ i ~ i ~ i ~ i {
  width: 100%;
}

.choice {
  background-color: #f8f8f8;
  border-radius: 5px;
  box-shadow: 0 0 6px #B2B2B2;
  display: inline-block;
  padding: 10px 18px;
  position: relative;
  vertical-align: top;
  margin-left: 25px;
  margin-top: 10px;
}
.choice:before {
  background-color: #f8f8f8;
  box-shadow: -2px 2px 2px 0 rgba(178, 178, 178, 0.4);
  content: "\00a0";
  display: block;
  height: 12px;
  position: absolute;
  left: -5px;
  top: 14px;
  -webkit-transform: rotate(29deg) skew(-35deg);
          transform: rotate(29deg) skew(-35deg);
  width: 15px;
}

.card-footer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  left: 0;
  bottom: 80px;
  width: 100%;
}

.choice-wrapper {
  display: none;
  margin: 0 auto;
  -webkit-transition: all 0.5s ease-in-out;
  transition: all 0.5s ease-in-out;
  -webkit-animation: bounce .5s 1;
          animation: bounce .5s 1;
}

@-webkit-keyframes bounce {
  0% {
    opacity: 0;
    -webkit-transform: translateY(50px);
            transform: translateY(50px);
  }
  60% {
    opacity: 1;
    -webkit-transform: translateY(-10px);
            transform: translateY(-10px);
  }
  100% {
    opacity: 1;
    -webkit-transform: translateY(0);
            transform: translateY(0);
  }
}

@keyframes bounce {
  0% {
    opacity: 0;
    -webkit-transform: translateY(50px);
            transform: translateY(50px);
  }
  60% {
    opacity: 1;
    -webkit-transform: translateY(-10px);
            transform: translateY(-10px);
  }
  100% {
    opacity: 1;
    -webkit-transform: translateY(0);
            transform: translateY(0);
  }
}
.avatar {
  float: left;
  width: 60px;
  height: 60px;
  border-radius: 100%;
}

.item, .detail {
  float: left;
}

.detail {
  clear: both;
}

.cost, .add {
  float: right;
}

.detail, .add {
  color: #999;
  font-size: .8rem;
  margin-top: 10px;
}

.receipt {
  border-bottom: 1px solid #eee;
  padding: 20px 0;
}

.clearfix:after {
  content: " ";
  display: table;
  clear: both;
}

.disclaimer {
  color: #999;
  font-size: .8rem;
  margin-bottom: 20px;
  text-align: center;
}

.tip {
  color: rebeccapurple;
  float: right;
  font-size: .9rem;
  padding: 20px 0;
}
.tip:hover {
  color: #331a4d;
}

.tip-wrapper {
  display: none;
  float: right;
  padding: 20px 0;
}
.tip-wrapper:before {
  content: "+ $";
  margin-right: 5px;
  line-height: 2;
}

.tip-amt {
  border: 1px solid #ccc;
  border-radius: 3px;
  padding: 5px;
  float: right;
  font-size: 1rem;
  text-align: right;
}

.btn, .yes {
  display: block;
  float: none;
  background-color: #fff;
  border: 1px solid rebeccapurple;
  color: rebeccapurple;
  font-weight: bold;
  border-radius: 5px;
  font-size: 1rem;
  padding: 20px;
  width: 100%;
  cursor: pointer;
  -webkit-transition: all 0.2s ease-in-out;
  transition: all 0.2s ease-in-out;
}
.btn:hover, .yes:hover {
  background-color: rebeccapurple;
  color: #fff;
}

.option {
  height: 100px;
}

.prev {
  top: -50px !important;
  left: -90px !important;
}

.next {
  top: -50px !important;
  right: -90px !important;
}

.glide__arrow.focused {
  background-color: #fff;
  color: rebeccapurple;
}

.flipped {
  transform: rotateY(180deg);
  -webkit-transform: rotateY(180deg);
}

figure {
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-backface-visibility: hidden;
          backface-visibility: hidden;
  position: absolute;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 50px;
  top: 0;
}

.front {
  background: #fff;
  transform: rotateY(0deg);
  -webkit-transform: rotateY(0deg);
  overflow: hidden;
  border-radius: 5px;
}

.back {
  background-color: #332777;
  -webkit-transform: rotateY(180deg);
          transform: rotateY(180deg);
  color: #fff;
  border-radius: 5px;
}
.back:before {
  content: '\f0f5';
  margin: 0 auto;
  text-align: center;
  font-size: 30px;
  font-family: 'FontAwesome';
  position: absolute;
  left: 0;
  right: 0;
}

.card {
  position: absolute;
  -webkit-transform-style: preserve-3d;
          transform-style: preserve-3d;
}

.container {
  -webkit-perspective: 800px;
          perspective: 800px;
}

.content {
  margin: auto;
  width: 100%;
}

.message {
  -ms-flex-preferred-size: 100%;
      flex-basis: 100%;
  margin-bottom: 20px;
  text-align: center;
}

.restaurant {
  font-size: 1.5rem;
  -ms-flex-preferred-size: 100%;
      flex-basis: 100%;
  text-align: center;
}

.reset {
  display: none;
  margin: 0 auto;
  opacity: 0;
  height: 0;
  color: #fff;
  padding: 20px;
  text-align: center;
  visibility: hidden;
}
.reset.show {
  visibility: visible;
  opacity: .7;
  height: auto;
  display: table;
}
.reset.show:hover {
  opacity: 1;
}

.confirm-wrapper {
  cursor: pointer;
  display: none;
  height: 100%;
  left: 0;
  position: fixed;
  top: 0;
  width: 100%;
  background-color: rgba(0, 0, 0, 0.5);
}

.confirm-modal {
  background-color: #fff;
  opacity: 0;
  width: 350px;
  border-radius: 5px;
  margin: auto;
  padding: 50px;
  -webkit-transition: all 0.4s ease-in-out;
  transition: all 0.4s ease-in-out;
  -webkit-transform: translateY(75px);
          transform: translateY(75px);
}
.confirm-modal .question {
  text-align: center;
  margin-bottom: 50px;
  line-height: 1.5rem;
}
.confirm-modal .cancel {
  margin: 0 auto;
  margin-top: 20px;
  padding: 5px;
  text-align: center;
  display: table;
}
.confirm-modal.appear {
  opacity: 1;
  -webkit-transform: translateY(150px);
          transform: translateY(150px);
}


<!-- Javascript for Rate & Tipping Pop up -->

$('.glide').glide({
  type: 'slider',
  keyboard: false,
  autoplay: false,
  paddings: '0',
  dragDistance: false,
  beforeTransition: beforeCardChange,
});


$('.tip-amt').click(function(){
  $('.glide').glide.dragDistance = false;
});

function beforeCardChange(args) {
var current = $('.glide__slide.active');
  current.removeClass('active');

  var left = args.swipe.distance > 0;
  var direction = left ? args.index - 1 : args.index + 1;
  var newIndex = parseInt(current.attr('data-slide-number')) + (left ? -1 : 1);
  if (newIndex > args.length) {
    newIndex = 1;
  }
  else if (newIndex <= 0) {
    newIndex = args.length;
  }
  $('[data-slide-number="' + newIndex + '"]').addClass('active');

}



$('.glide__arrow').click(function(){
  $(this).removeClass('focused');
});

$(':radio').change(
  function(e){
    $('.next').addClass('focused');
    $('.choice-wrapper').hide().delay('100').fadeIn();
    $('.choice-wrapper').addClass('pop');
      e.preventDefault;

        $('.choice-wrapper').removeClass('pop');
      $('.choice-wrapper').addClass('pop');


    if (this.value == '1') {
      $('.choice').text( "Only 1 star? Sorry to hear, please give us feedback!" );
    }
     if (this.value == '2') {
      $('.choice').text( "Hey, we tried but we know we can do better" );
    }
    if (this.value == '3') {
      $('.choice').text( "We're a work in Progress." );
    }
    if (this.value == '4') {
      $('.choice').text( "Yay, I guess you liked it!" );
    }
     if (this.value == '5') {
      $('.choice').text( "Wow, 5 stars!? Thanks!" );
    }
  }
 )

$('.tip').click(function(){
  $(this).hide();
  $('.tip-wrapper').fadeIn('slow');
  $('.tip-amt').focus();
});



  $('.btn').val("Pay" + " " + "$" + "22.00");


$('.tip-amt').keyup(function(){
var i = 22;
var j = $('.tip-amt').val();
var k = Number(i) + Number(j);
var total = k.toFixed(2)
  $('.btn').val("Pay" + " " + "$" + total);
  });

$('.btn').click(function(){
      if($('.btn').val()=="Pay" + " " + "$" + "22.00"){
      $('.confirm-wrapper').fadeIn();
        $('.confirm-modal').addClass('appear');
      }
  else {
        $('.card').toggleClass('flipped');
    $('.glide__arrow').hide();
    $('.reset').addClass('show');
  }
});


$('.reset').click(function(){
  var glide_api = $("#glide").data('glide_api');
  $('.choice-wrapper').hide();
  $('.card').toggleClass('flipped');
  $('.glide__arrow').fadeIn();
  $('.tip-amt').val('');
  $('.btn').val("Pay $22.00");
  $('input[name=rating]').attr('checked', false);
  $(this).removeClass('show');
  $('.tip-wrapper').hide();
  $('.tip').show();
  glide_api.refresh();


});

$('.confirm-wrapper, .cancel').click(function(){
  $('.confirm-wrapper').fadeOut('fast');
  $('.confirm-modal').removeClass('appear');
    $('.tip').hide();
  $('.tip-wrapper').fadeIn('slow');
  $('.tip-amt').focus();
  $('.tip-amt').focus();
});

$('.yes').click(function(){
  $('.card-wrapper').fadeOut();
    $('.card').toggleClass('flipped');
    $('.glide__arrow').hide();
    $('.reset').addClass('show');
});














